(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1453],{42480:function(){},34163:function(t,e,o){"use strict";var r=o(95034),s=o.n(r);class n{static isEmpty(t){return""===t||null===t||"null"===t||void 0===t||void 0===t||null!==t&&"object"==typeof t&&!Object.keys(t).length}static isNotEmpty(t){return!n.isEmpty(t)}static sliceStringByByte(t,e){let o="",r=0;for(let s=0;s<t.length;s++){let n=t[s],i=encodeURIComponent(n).length;if(r+i<=e)o+=n,r+=i;else break}return o}static decodeHtmlEntities(t){return t?"undefined"==typeof document?t:(n.textarea||(n.textarea=document.createElement("textarea")),n.textarea.innerHTML=t,n.textarea.value):""}}n.calculateByteLength=t=>{let e=0;for(let o=0;o<t.length;o++){let r=t.charCodeAt(o);r>=44032&&r<=55215?e+=3:r>=0&&r<=127?e+=1:e+=3}return e},n.amountFormat=t=>t.replace(/\B(?=(\d{3})+(?!\d))/g,","),n.formatViewerCnt=t=>{let e="string"==typeof t?parseInt(t.replace(/,/g,""),10):t;return isNaN(e)?"0":e<1e4?e.toLocaleString()+"":e<1e8?(Math.floor(e/1e3)/10).toLocaleString()+"만":(Math.floor(e/1e7)/10).toLocaleString()+"억"},n.formatStripHtml=t=>t.replace(/<[^>]*>?/gm,""),n.chkConsecutiveChars=t=>/(.)\1{4,}/.test(t),n.updateSessionHistory=(t,e,o)=>{let r=sessionStorage.getItem("history"),s=r?JSON.parse(r):{};for(Array.isArray(s[t])||(s[t]=[]);s[t].length<=e;)s[t].push(void 0);s[t][e]=o,sessionStorage.setItem("history",JSON.stringify(s))},n.getFromSessionHistory=t=>{let e=sessionStorage.getItem("history");if(!e)return!1;let o=JSON.parse(e);return!!o[t]&&o[t]},n.removeStoreSessionHistory=()=>{n.removeSessionHistory("sto"),n.removeSessionHistory("gft"),n.updateSessionHistory("stoHotdl",0,"Y"),n.updateSessionHistory("gftHotdl",0,"Y")},n.setTopFixSessionHistory=()=>{let t=sessionStorage.getItem("defaultMain");n.updateSessionHistory("main",0,t),n.updateSessionHistory("main",1,""),n.updateSessionHistory("main",2,"")},n.removeSessionHistory=t=>{let e=sessionStorage.getItem("history");if(!e)return!1;let o=JSON.parse(e);if(!o[t])return!1;let r=o[t];return delete o[t],sessionStorage.setItem("history",JSON.stringify(o)),r},n.encodeToBase64=t=>btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(t,e)=>String.fromCharCode(parseInt(e,16)))),n.decodeFromBase64=t=>decodeURIComponent(Array.from(atob(t)).map(t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join("")),n.injectHtmlWithScripts=t=>{let e=document.querySelector("#base64Html");if(!e){console.info("Container not found #base64Html");return}e.innerHTML=String(t),e.querySelectorAll("script").forEach(t=>{let e=document.createElement("script");Array.from(t.attributes).forEach(t=>e.setAttribute(t.name,t.value)),t.src?(e.onload=()=>{},e.onerror=()=>{},e.src=t.src,document.body.appendChild(e)):(e.textContent=t.textContent,setTimeout(()=>{document.body.appendChild(e)},500))})},n.textarea=null,n.moviBookHistoryBack=()=>{let t=sessionStorage.getItem("moviBookHistoryBack");if(!t)return"";{let e=JSON.parse(t),o=s().last(e),r=s().dropRight(e,1);return 0===r.length&&""===String(r)?sessionStorage.removeItem("moviBookHistoryBack"):sessionStorage.setItem("moviBookHistoryBack",JSON.stringify(r)),String(o)}},n.moviBookHistoryForward=t=>{let e=sessionStorage.getItem("moviBookHistoryBack");if(e){let o=JSON.parse(e);o.push(t);let r=s().uniq(o);sessionStorage.setItem("moviBookHistoryBack",JSON.stringify(r))}else{let e=[];e.push(t);let o=s().uniq(e);sessionStorage.setItem("moviBookHistoryBack",JSON.stringify(o))}},n.isValidImageLink=t=>!!(t&&t.trim())&&/\.(jpg|jpeg|png|gif|webp)$/i.test(t),n.getFormattedMovUrlToPath=(t,e)=>{if(n.isEmpty(t)||n.isEmpty(e))return"";let o=("0000000000"+t).slice(-9).slice(0,6),r=(n.isEmpty(e)?"":e).split("/").pop()||"";return n.isValidImageLink(r)?"".concat("https://cdn.cgv.co.kr/cgvpomsfilm/Movie/Thumbnail/Poster","/").concat(o,"/").concat(t,"/").concat(r):""},n.getFormattedMovNameToPath=(t,e)=>{if(n.isEmpty(t)||!n.isValidImageLink(e))return"";let o=("0000000000"+t).slice(-9).slice(0,6);return"".concat("https://cdn.cgv.co.kr/cgvpomsfilm/Movie/Thumbnail/Poster","/").concat(o,"/").concat(t,"/").concat(e)},n.truncateByBytes=(t,e)=>{let o=new TextEncoder;if(o.encode(t).length<=e)return t;let r="",s=0;for(let n of t){let t=o.encode(n).length;if(s+t>e)break;r+=n,s+=t}return r},e.Z=n},74189:function(t,e,o){"use strict";o.d(e,{Z:function(){return u}});var r=o(31729),s=o(34163),n=o(76492),i=o.n(n);/**
 * @copyright Copyright 2022. CJ OliveNetworks Co. all rights reserved.
 * @file fetch.ts
 * @description fetch 인터셉터 공통 모듈 (서버+클라이언트 동시 사용)
 *              로그의 경우 client 적용시 에러 발생으로 분기 처리
 * @author su-kang <sanguk.kang@cj.net>
 * @since 2024.07.19
 * ---------------------------------------------------------------------
 * Date                     AUTHOR                  MAJOR_ISSUE
 * ---------------------------------------------------------------------
 * 2024.07.19               su-kang                  신규 생성
 */let a=!1,c=[];async function l(){let t;{let{getCookie:e}=await o.e(3240).then(o.bind(o,23240));t=e("accessToken")}return s.Z.isEmpty(t)?"":t}let m=(0,r.Z)({baseUrl:"",headers:{Accept:"application/json"},interceptors:{request:async t=>{let[e,o]=t,r=(null==o?void 0:o.headers)||new Headers,s=await l();if(s&&r.set("Authorization","Bearer ".concat(s)),r.set("Accept-Language","ko-KR"),["https://api-mobile.cgv.co.kr","https://api-mobile.cgv.co.kr","https://event-mobile.cgv.co.kr"].some(t=>e.toString().startsWith(t||""))){let t=Math.floor(Date.now()/1e3).toString(),s=(null==o?void 0:o.body)?"string"==typeof o.body?o.body:"multipart/form-data":"",n=function(t,e,o){let r="".concat(o,"|").concat(t,"|").concat(e);return i().HmacSHA256(r,"ydqXY0ocnFLmJGHr_zNzFcpjwAsXq_8JcBNURAkRscg").toString(i().enc.Base64)}(new URL(e).pathname,s,t);r.set("X-TIMESTAMP",t),r.set("X-SIGNATURE",n)}return o&&(o.headers=r,o.credentials="include"),[e,o]},response:async(t,e,o)=>{if(t.ok)return t;{console.info("client api 호출 실패 입니다: ");let r=t.clone();try{let r=await t.json();if(401===t.status&&-1001===r.statusCode){if(!a){a=!0;let e=await l(),o=await p({accessToken:e});if(-1002===o.statusCode)throw await t.text().then(Error);let r=o.data.accessToken;d("accessToken",r,30).then(),setTimeout(()=>{c.forEach(t=>t(r)),c=[],a=!1},500)}return new Promise(t=>{c.push(r=>{var s;let n=null===(s=e[1])||void 0===s?void 0:s.headers;n instanceof Headers&&n.set("Authorization","Bearer ".concat(r)),t(o(...e))})})}if(t.status,r&&r.statusMessage)throw Error(r.statusMessage);throw await t.text().then(Error)}catch(t){throw await r.text().then(Error)}}}}});var u=m;async function d(t,e,o){let r=new Date;r.setTime(r.getTime()+864e5*o);let s="expires="+r.toUTCString();document.cookie="".concat(t,"=").concat(e,"; ").concat(s,"; path=/; SameSite=Strict;")}let p=async t=>await m("https://oidc-mobile.cgv.co.kr/common/auth/refreshtoken",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(t=>t.json())}}]);